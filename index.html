<!DOCTYPE html>
<html>

<head>
    <meta charset=utf-8 />
    <title>Picasa-Map</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.mapbox.com/mapbox.js/v2.2.1/mapbox.js'></script>
    <link href='https://api.mapbox.com/mapbox.js/v2.2.1/mapbox.css' rel='stylesheet' />
    <link href='style.css' rel='stylesheet' />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src='usernames.json'></script>
    <script src='functions.js'></script>
</head>

<body>
    <div id="sidePanel">
        <div id="innerDiv">
            <h2>Picasa Map</h2>
            <p>Search a Picasa ID or Google Username</p>
            <p class="hint">(Hint: if your gmail address is johnSmith@gmail.com search for johnsmith)</p>
            <table id="searchTable">
                <tr>
                <td><input type="text" id="picasa_id"></td>
                <td><button id="loadAlbumsButton">Search</button></td>
                <td><button id='shareButton'>Share this Map</button></td>
                </tr>
            </table>
            
            <div id='shareDiv'>
                
                <input type='text' id='shareLinkInput' >
            </div>

            <div id="authorDetails">
                <div id="authorImg"></div>
                <div id="authorName"></div>
                <div id="authorNumberAlbums"></div>
            </div>
            <table id="albumResults">

            </table>
            <br />
            <div class="loader">Loading...</div>
            <div class="error">Unfortunately, it looks like there was an error. Please check your Google Username and Album Id again.</div>

        </div>
    </div>
    <div id='rightPanel'>
        <div id='map'></div>
        <div id='mapLoaderContainer'>
            <div class='mapLoader'></div>
        </div>
        <div id='noGPSMessage'>
            <p>It looks like there are no GPS images in this album</p>
            <p>Try another </p>
        </div>
    </div>

    <script>
        //Load the map
        L.mapbox.accessToken = usernames.mapBoxToken;

        map = L.mapbox.map('map', 'mapbox.streets')
            .setView([0, 0], 4);

        myLayer = L.mapbox.featureLayer().addTo(map);

        $("#loadAlbumsButton").click(function () {
            loadAlbumsButton();
        });
        
        $("#shareButton").click(function () {
            showShareLink();
        });

        $("#albumResults").on("click", "tr", function () {
            var albumId = $(this).attr("id");
            loadPicasaAlbum(albumId);

        });
    </script>

</body>

</html>